<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantifyre Iris - Client Dashboard</title>

    <link rel="stylesheet" href="Css/client_style.css">
    <link rel="stylesheet" href="Css/client_sidebar.css">

    <link rel="stylesheet" href="Css/fontstyle.css">
    <link rel="stylesheet" href="Css/all.css">
    <link rel="stylesheet" href="Css/leaflet.css">
    <link rel="stylesheet" href="Css/leaflet.draw.css">
</head>

<body>
    <!-- <div class="sidebar-overlay" id="sidebarOverlay"></div> -->

    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-close-btn" id="sidebarClose">
                <i class="fa-solid fa-xmark"></i>
            </div>

            <div class="logo-section">
                <div class="logo-icon">
                    <img src="Images/quantifirelogo.png" alt="Quantifyre Logo">
                </div>
            </div>

            <div class="user-mini-profile">
                <div class="avatar-circle">
                    <img src="Images/ClientSlider.ico" alt="Client Avatar">
                </div>
                <p>Client Name</p>
            </div>

            <nav>
                <ul>
                    <li class="active"><a href="ClientDashboard.html"><img src="Images/Dashboard30x30.ico">
                            Dashboard</a></li>
                    <li><a href="ClientCampaigns.html"><img src="Images/Campaign30x30.ico"> Campaigns</a></li>
                    <li><a href="ClientLeads.html"><img src="Images/Leads30x30.ico"> Leads</a></li>
                    <li><a href="Clientsetting.html"><img src="Images/Setting30x30.ico"> Settings</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="menu-toggle" id="sidebarToggle">
                    <img src="Images/Slide.ico" alt="Toggle Menu">
                </div>

                <div class="search-bar">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Search campaigns, leads, locations...">
                </div>

                <div class="top-profile-actions">

                    <div class="notification-wrapper" onclick="toggleNavDropdown(event, 'notifDropdown')">
                        <div class="icon-btn notification" onclick="toggleNotification(event)">
                            <img src="Images/Notifications.ico" alt="Notifications">
                            <span class="notif-count">3</span>
                        </div>

                        <div class="notif-dropdown" id="notifDropdown">
                            <div class="notif-header">
                                <h4>Notifications</h4><span class="mark-read">Mark all read</span>
                            </div>
                            <ul class="notif-list">
                                <li class="notif-item unread">
                                    <div class="n-icon success"><i class="fa-solid fa-user-plus"></i></div>
                                    <div class="n-text">
                                        <p><strong>New Lead</strong></p><span>registered in Ahmadabad.</span>
                                    </div>
                                    <span class="n-time">2m</span>
                                </li>
                                <li class="notif-item unread">
                                    <div class="n-icon info"><i class="fa-solid fa-bullhorn"></i></div>
                                    <div class="n-text">
                                        <p><strong>Campaign</strong></p><span>"Summer Sale Started"</span>
                                    </div>
                                    <span class="n-time">1h</span>
                                </li>
                                <li class="notif-item">
                                    <div class="n-icon warning"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                                    <div class="n-text">
                                        <p><strong>Payment</strong></p><span>received from Acme Corp.</span>
                                    </div>
                                    <span class="n-time">1d</span>
                                </li>
                            </ul>
                            <div class="notif-footer"><a href="#">View All Notifications</a></div>
                        </div>
                    </div>

                    <div class="profile-info" onclick="toggleNavDropdown(event, 'profileDropdown')">
                        <div class="avatar-small">
                            <img src="Images/ClientHeader.ico" alt="Profile">
                        </div>
                        <div class="text-info">
                            <h4>Adam Smith</h4>
                            <p>Client</p>
                        </div>
                        <i class="fa-solid fa-chevron-down" id="profileChevron"></i>
                    </div>

                    <div class="profile-dropdown" id="profileDropdown">
                        <div class="dropdown-header-info">
                            <p class="d-name">Adam Smith</p>
                            <span class="d-email">adam@quantifyre.com</span>
                        </div>
                        <ul class="dropdown-list">
                            <li><a href="profile.html"><i class="fa-regular fa-user"></i> My Profile</a></li>
                            <li><a href="Clientsetting.html"><i class="fa-solid fa-gear"></i> Settings</a></li>
                            <li><a href="#"><i class="fa-regular fa-circle-question"></i> Help Center</a></li>
                            <div class="dropdown-divider"></div>
                            <li><a href="javascript:void(0)" onclick="openLogoutModal()" ><i
                                class="fa-solid fa-arrow-right-from-bracket"></i> Logout</a></li>
                            </li>
                        </ul>
                    </div>
                </div>
            </header>

            <section class="welcome-section">
                <div class="welcome-text">
                    <h1>ðŸ‘‹ Good Morning, Adam Smith!</h1>
                    <p>Here's your Client Dashboard overview.</p>
                </div>
            </section>

            <section class="stats-grid">
                <div class="stat-card" id="stat-card1">
                    <div class="card-header">
                        <div class="icon-box icon-blue"><img src="Images/Campaign50x50.ico" alt=""></div>
                        <span class="percent up"><i class="fa-solid fa-arrow-up"></i> 25%</span>
                    </div>
                    <h2>38</h2>
                    <p>Total Campaigns</p>
                </div>
                <div class="stat-card" id="stat-card2">
                    <div class="card-header">
                        <div class="icon-box icon-cyan"><img src="Images/Leads50x50.ico" alt=""></div>
                        <span class="percent up"><i class="fa-solid fa-arrow-up"></i> 6%</span>
                    </div>
                    <h2>1470</h2>
                    <p>Total Leads</p>
                </div>
                <div class="stat-card">
                    <div class="card-header">
                        <div class="icon-box icon-green"><img src="Images/Customer50x50.ico" alt=""></div>
                        <span class="percent up"><i class="fa-solid fa-arrow-up"></i> 35%</span>
                    </div>
                    <h2>2050</h2>
                    <p>Customers</p>
                </div>
                <div class="stat-card">
                    <div class="card-header">
                        <div class="icon-box icon-dark-blue"><img src="Images/Reports&Leads.ico" alt=""></div>
                        <span class="percent up"><i class="fa-solid fa-arrow-up"></i> 5%</span>
                    </div>
                    <h2>505</h2>
                    <p>Export Report & Leads</p>
                </div>
            </section>

            <section class="bottom-grid">
                <div class="map-card glass-panel">
                    <h3>Geofence Map</h3>
                    <div class="map-toolbar-inner">
                        <div class="custom-dropdown" id="shapeDropdown">
                            <div class="dropdown-trigger" onclick="toggleShapeDropdown(event)">
                                <span id="selectedToolText"><i class="far fa-circle"></i> Circle</span>
                                <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                            </div>
                            <ul class="dropdown-menu">
                                <li class="dropdown-item" onclick="selectTool('circle', 'Circle')"><i
                                        class="far fa-circle"></i> Circle</li>
                                <li class="dropdown-item" onclick="selectTool('rectangle', 'Rectangle')"><i
                                        class="far fa-square"></i> Rectangle</li>
                                <li class="dropdown-item" onclick="selectTool('polygon', 'Polygon')"><i
                                        class="fas fa-draw-polygon"></i> Polygon</li>
                            </ul>
                        </div>
                        <input type="text" id="customSearchInput" class="map-input" placeholder="City..."
                            onkeypress="handleEnter(event)">
                        <button class="btn-icon btn-search" id="searchBtn" onclick="performDirectSearch()"><i
                                class="fas fa-search"></i></button>
                        <input type="number" id="radiusInput" class="map-input" placeholder="Rad(m)"
                            onkeypress="handleEnter(event)">
                        <button class="btn-icon btn-check" onclick="applyFilter()"><i class="fas fa-check"></i></button>
                        <button class="btn-icon btn-clear" onclick="clearMap()"><i
                                class="fas fa-trash-alt"></i></button>
                    </div>
                    <div id="geofenceMap" class="dark-theme-map"></div>
                </div>

                <div class="locations-card glass-panel">
                    <h3>Top Locations</h3>
                    <ul class="location-list">
                        <li class="location-item">
                            <div class="loc-icon"><i class="fa-solid fa-location-dot"></i></div>
                            <div class="loc-details">
                                <h4>Mehsana</h4>
                                <p>Gujarat</p>
                            </div>
                            <div class="loc-count">428 <span>leads</span></div>
                        </li>
                        <li class="location-item">
                            <div class="loc-icon color-2"><i class="fa-solid fa-location-dot"></i></div>
                            <div class="loc-details">
                                <h4>Gandhinagar</h4>
                                <p>Gujarat</p>
                            </div>
                            <div class="loc-count">385 <span>leads</span></div>
                        </li>
                        <li class="location-item">
                            <div class="loc-icon color-3"><i class="fa-solid fa-location-dot"></i></div>
                            <div class="loc-details">
                                <h4>Patan</h4>
                                <p>Gujarat</p>
                            </div>
                            <div class="loc-count">312 <span>leads</span></div>
                        </li>
                        <li class="location-item">
                            <div class="loc-icon color-4"><i class="fa-solid fa-location-dot"></i></div>
                            <div class="loc-details">
                                <h4>Ahmadabad</h4>
                                <p>Gujarat</p>
                            </div>
                            <div class="loc-count">298 <span>leads</span></div>
                        </li>
                        <li class="location-item">
                            <div class="loc-icon color-2"><i class="fa-solid fa-location-dot"></i></div>
                            <div class="loc-details">
                                <h4>Surat</h4>
                                <p>Gujarat</p>
                            </div>
                            <div class="loc-count">150 <span>leads</span></div>
                        </li>
                    </ul>
                </div>
            </section>

            <section class="active-campaigns-full">
                <div class="active-campaigns-box">
                    <div class="ac-header">
                        <h3>Active Campaigns</h3>
                        <a class="btn-back" style="text-decoration: none; background-color: #031414;"
                            href="ClientActiveCampaigns.html">View All</a>
                    </div>
                    <div class="ac-table-wrap">
                        <table class="ac-table">
                            <thead>
                                <tr>
                                    <th>Campaign Name</th>
                                    <th>Location</th>
                                    <th>Status</th>
                                    <th>Leads</th>
                                    <th>Customers</th>
                                    <th>Conv. Rate</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Summer Sale Email Campaign</td>
                                    <td>Mehsana</td>
                                    <td><span class="badge active">Active</span></td>
                                    <td>428</td>
                                    <td>187</td>
                                    <td>43.7%</td>
                                    <td><a href="ClientCampaignReportDetails.html" class="btn-report">Report</a></td>
                                </tr>
                                <tr>
                                    <td>Geo Local Promo SMS Campaign</td>
                                    <td>Gandhinagar</td>
                                    <td><span class="badge active">Active</span></td>
                                    <td>385</td>
                                    <td>162</td>
                                    <td>42.1%</td>
                                    <td><a href="ClientCampaignReportDetails.html" class="btn-report">Report</a></td>
                                </tr>
                                <tr>
                                    <td>Patron Discount Social Media</td>
                                    <td>Patan</td>
                                    <td><span class="badge active">Active</span></td>
                                    <td>312</td>
                                    <td>140</td>
                                    <td>44.8%</td>
                                    <td><a class="btn-report" href="ClientCampaignReportDetails.html">Report</a></td>
                                </tr>
                                <tr>
                                    <td>Ahmadabad Special Display Ads</td>
                                    <td>Ahmadabad</td>
                                    <td><span class="badge paused">Paused</span></td>
                                    <td>298</td>
                                    <td>130</td>
                                    <td>43.6%</td>
                                    <td><a class="btn-report" href="ClientCampaignReportDetails.html">Report</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Logut Model Logic -->
    <div class="modal-overlay" id="logoutModal">
        <div class="modal-content">
            <div class="modal-icon-box2">
                <i class="fa-solid fa-arrow-right-from-bracket"></i>
            </div>
            <h2>Ready to Leave?</h2>
            <p>Are you sure you want to logout? You will need to login again to access your dashboard.</p>
            <div class="modal-actions">
                <button class="btn-modal btn-modal-cancel" onclick="closeLogoutModal()">Cancel</button>
                <button class="btn-modal btn-modal-delete" onclick="confirmLogout()">Logout</button>
            </div>
        </div>
    </div>

    <script src="Js/jquery-3.7.1.min.js"></script>
    <script src="Js/leaflet.js"></script>
    <script src="Js/leaflet.draw.js"></script>
    <script src="Js/allclient.js"></script>

    <script>
        
        $(document).ready(function () {
            window.toggleShapeDropdown = function (event) {
                event.stopPropagation();
                $('#shapeDropdown').toggleClass('active');
            };
            window.selectTool = function (type, name) {
                const icon = type === 'polygon' ? 'draw-polygon' : (type === 'circle' ? 'circle' : 'square');
                $('#selectedToolText').html(`<i class="far fa-${icon}"></i> ${name}`);
                $('#shapeDropdown').removeClass('active');
            };
            $(document).on('click', function (e) {
                if (!$(e.target).closest('.custom-dropdown').length) {
                    $('#shapeDropdown').removeClass('active');
                }
            });
        });
        // --- Map Initialization ---
        var map = L.map('geofenceMap', { zoomControl: false }).setView([20.5937, 78.9629], 5);
        L.control.zoom({ position: 'bottomright' }).addTo(map);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(map);
        var drawnItems = new L.FeatureGroup().addTo(map);
        function performDirectSearch() { console.log("Searching..."); }
        function applyFilter() { console.log("Filtering..."); }
        function clearMap() { drawnItems.clearLayers(); }
        function handleEnter(e) { if (e.key === 'Enter') performDirectSearch(); }
    </script>
</body>

</html>